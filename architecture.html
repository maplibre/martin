<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Architecture - Martin Tile Server Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon-de23e50b.svg">
        <link rel="shortcut icon" href="favicon-8114d1fc.png">
        <link rel="stylesheet" href="css/variables-8adf115d.css">
        <link rel="stylesheet" href="css/general-2459343d.css">
        <link rel="stylesheet" href="css/chrome-ae938929.css">
        <link rel="stylesheet" href="css/print-9e4910d8.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="fonts/fonts-9644e21d.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="mdbook-highlight-css" href="highlight-493f70e1.css">
        <link rel="stylesheet" id="mdbook-tomorrow-night-css" href="tomorrow-night-4c0ae647.css">
        <link rel="stylesheet" id="mdbook-ayu-highlight-css" href="ayu-highlight-3fdfc3ac.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="theme/tabs-478bfc3b.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex-d9356835.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc-da940ac3.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>‚Üê</kbd> or <kbd>‚Üí</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="mdbook-body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="mdbook-sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("mdbook-sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="mdbook-sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="mdbook-sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="mdbook-page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="mdbook-menu-bar-hover-placeholder"></div>
                <div id="mdbook-menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="mdbook-sidebar-toggle" class="icon-button" for="mdbook-sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="mdbook-sidebar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg></span>
                        </label>
                        <button id="mdbook-theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="mdbook-theme-list">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M371.3 367.1c27.3-3.9 51.9-19.4 67.2-42.9L600.2 74.1c12.6-19.5 9.4-45.3-7.6-61.2S549.7-4.4 531.1 9.6L294.4 187.2c-24 18-38.2 46.1-38.4 76.1L371.3 367.1zm-19.6 25.4l-116-104.4C175.9 290.3 128 339.6 128 400c0 3.9 .2 7.8 .6 11.6c1.8 17.5-10.2 36.4-27.8 36.4H96c-17.7 0-32 14.3-32 32s14.3 32 32 32H240c61.9 0 112-50.1 112-112c0-2.5-.1-5-.2-7.5z"/></svg></span>
                        </button>
                        <ul id="mdbook-theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-ayu">Ayu</button></li>
                        </ul>
                        <button id="mdbook-search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="mdbook-searchbar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z"/></svg></span>
                        </button>
                    </div>

                    <h1 class="menu-title">Martin Tile Server Documentation</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <span class=fa-svg id="print-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M128 0C92.7 0 64 28.7 64 64v96h64V64H354.7L384 93.3V160h64V93.3c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0H128zM384 352v32 64H128V384 368 352H384zm64 32h32c17.7 0 32-14.3 32-32V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v96c0 17.7 14.3 32 32 32H64v64c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V384zm-16-88c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"/></svg></span>
                        </a>
                        <a href="https://github.com/maplibre/martin" title="Git repository" aria-label="Git repository">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span>
                        </a>
                        <a href="https://github.com/maplibre/martin/edit/main/docs/src/architecture.md" title="Suggest an edit" aria-label="Suggest an edit" rel="edit">
                            <span class=fa-svg id="git-edit-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M421.7 220.3l-11.3 11.3-22.6 22.6-205 205c-6.6 6.6-14.8 11.5-23.8 14.1L30.8 511c-8.4 2.5-17.5 .2-23.7-6.1S-1.5 489.7 1 481.2L38.7 353.1c2.6-9 7.5-17.2 14.1-23.8l205-205 22.6-22.6 11.3-11.3 33.9 33.9 62.1 62.1 33.9 33.9zM96 353.9l-9.3 9.3c-.9 .9-1.6 2.1-2 3.4l-25.3 86 86-25.3c1.3-.4 2.5-1.1 3.4-2l9.3-9.3H112c-8.8 0-16-7.2-16-16V353.9zM453.3 19.3l39.4 39.4c25 25 25 65.5 0 90.5l-14.5 14.5-22.6 22.6-11.3 11.3-33.9-33.9-62.1-62.1L314.3 67.7l11.3-11.3 22.6-22.6 14.5-14.5c25-25 65.5-25 90.5 0z"/></svg></span>
                        </a>

                    </div>
                </div>

                <div id="mdbook-search-wrapper" class="hidden">
                    <form id="mdbook-searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="mdbook-searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="mdbook-searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <span class=fa-svg id="fa-spin"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M304 48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zm0 416c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM48 304c26.5 0 48-21.5 48-48s-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48zm464-48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM142.9 437c18.7-18.7 18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zm0-294.2c18.7-18.7 18.7-49.1 0-67.9S93.7 56.2 75 75s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zM369.1 437c18.7 18.7 49.1 18.7 67.9 0s18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9z"/></svg></span>
                            </div>
                        </div>
                    </form>
                    <div id="mdbook-searchresults-outer" class="searchresults-outer hidden">
                        <div id="mdbook-searchresults-header" class="searchresults-header"></div>
                        <ul id="mdbook-searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('mdbook-sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('mdbook-sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#mdbook-sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="mdbook-content" class="content">
                    <main>
                        <h1 id="architecture"><a class="header" href="#architecture">Architecture</a></h1>
<p>This document provides a high-level overview of Martin‚Äôs architecture, describing its major components, how they interact, and the rationale behind key design decisions.</p>
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p>Martin is a blazing fast tile server written in Rust that generates and serves vector tiles on the fly from multiple data sources. It is designed to handle heavy traffic and optimize for speed while maintaining a clean separation of concerns.</p>
<pre class="mermaid">graph TB
    Client[Map Client&lt;br/&gt;MapLibre, Leaflet, etc.]

    subgraph Martin["Martin Tile Server"]
        CLI[CLI Entry Point&lt;br/&gt;martin binary]
        Server[HTTP Server&lt;br/&gt;Actix-Web]

        subgraph Sources["Tile Sources"]
            PG[PostgreSQL&lt;br/&gt;Tables &amp; Functions]
            MBT[MBTiles Files]
            PMT[PMTiles Files&lt;br/&gt;Local &amp; Remote]
            COG[Cloud Optimized&lt;br/&gt;GeoTIFF]
        end

        subgraph Resources["Supporting Resources"]
            Sprites[Sprite Generation&lt;br/&gt;SVG to PNG]
            Fonts[Font Glyphs&lt;br/&gt;PBF Format]
            Styles[MapLibre Styles&lt;br/&gt;JSON]
        end

        Catalog[Tile Catalog&lt;br/&gt;Source Registry]
        Cache[Tile/Resources Cache&lt;br/&gt;Moka]
    end

    subgraph Storage["Data Storage"]
        DB[(PostgreSQL&lt;br/&gt;PostGIS)]
        Files[File System&lt;br/&gt;MBTiles/PMTiles]
        S3[Object Storage&lt;br/&gt;S3/Azure/GCP]
    end

    Client --&gt;|HTTP Requests| Server
    Server --&gt; Catalog
    Catalog --&gt; Sources
    Server --&gt; Resources
    Server --&gt; Cache

    PG --&gt; DB
    MBT --&gt; Files
    PMT --&gt; Files
    PMT --&gt; S3
    COG --&gt; Files
    COG --&gt; S3

    Cache -.-&gt;|Cached Tiles/Resources| Client
</pre>

<h2 id="core-components"><a class="header" href="#core-components">Core Components</a></h2>
<p>Martin‚Äôs architecture is organized into four main Rust crates, each with distinct responsibilities:</p>
<div class="mdbook-tabs-container">
<nav class="mdbook-tabs">
<button class="mdbook-tab active" data-tabname="martin (Main Server)">martin (Main Server)</button>
<button class="mdbook-tab" data-tabname="martin-core (Library)">martin-core (Library)</button>
<button class="mdbook-tab" data-tabname="mbtiles (Library &amp; CLI)">mbtiles (Library &amp; CLI)</button>
<button class="mdbook-tab" data-tabname="martin-tile-utils">martin-tile-utils</button>
</nav>
<div class="mdbook-tab-content" data-tabname="martin (Main Server)">
<p><strong>Purpose</strong>: The main tile server binary and HTTP service layer.</p>
<p><strong>Location</strong>: <code>/martin</code></p>
<p><strong>Key Responsibilities</strong>:</p>
<ul>
<li>HTTP server using Actix-Web framework</li>
<li>Request routing and endpoint handling</li>
<li>Configuration parsing (CLI args, env vars, config files)</li>
<li>Tile source discovery and initialization</li>
<li>Serving the Web UI for tile inspection</li>
</ul>
<p><strong>Main Modules</strong>:</p>
<ul>
<li><code>src/bin/martin.rs</code> - Server entry point</li>
<li><code>src/bin/martin-cp.rs</code> - Bulk tile copying tool</li>
<li><code>src/srv/</code> - HTTP service handlers
<ul>
<li><code>server.rs</code> - Main server setup and routing</li>
<li><code>tiles/</code> - Tile serving endpoints</li>
<li><code>fonts.rs</code> - Font glyph serving</li>
<li><code>sprites.rs</code> - Sprite serving</li>
<li><code>styles.rs</code> - Style serving</li>
</ul>
</li>
<li><code>src/config/</code> - Configuration management
<ul>
<li><code>args/</code> - CLI argument parsing</li>
<li><code>file/</code> - Config file parsing</li>
</ul>
</li>
<li><code>martin-ui/</code> - React-based web interface</li>
</ul>
</div>

<div class="mdbook-tab-content hidden" data-tabname="martin-core (Library)">
<p><strong>Purpose</strong>: Core abstractions and implementations for tile sources and supporting resources.</p>
<p><strong>Location</strong>: <code>/martin-core</code></p>
<p><strong>Key Responsibilities</strong>:</p>
<ul>
<li>Abstract tile source traits and implementations</li>
<li>PostgreSQL connection pooling and query execution</li>
<li>MBTiles and PMTiles reading</li>
<li>Cloud Optimized GeoTIFF (COG) tile extraction</li>
<li>Sprite, font, and style resource generation</li>
<li>Tile format handling (MVT protocol buffers)</li>
</ul>
<p><strong>Main Modules</strong>:</p>
<ul>
<li><code>src/tiles/</code> - Tile source implementations
<ul>
<li><code>postgres/</code> - PostGIS table and function sources</li>
<li><code>mbtiles/</code> - MBTiles file source</li>
<li><code>pmtiles/</code> - PMTiles file source</li>
<li><code>cog/</code> - Cloud Optimized GeoTIFF source</li>
<li><code>catalog.rs</code> - Source registry and management</li>
</ul>
</li>
<li><code>src/resources/</code> - Supporting resources
<ul>
<li><code>sprites/</code> - SVG sprite generation</li>
<li><code>fonts/</code> - Font glyph generation</li>
<li><code>styles/</code> - MapLibre style handling</li>
</ul>
</li>
</ul>
</div>

<div class="mdbook-tab-content hidden" data-tabname="mbtiles (Library &amp; CLI)">
<p><strong>Purpose</strong>: MBTiles format support and manipulation tools.</p>
<p><strong>Location</strong>: <code>/mbtiles</code></p>
<p><strong>Key Responsibilities</strong>:</p>
<ul>
<li>SQLite-based MBTiles reading and writing</li>
<li>Metadata management</li>
<li>Tile compression (gzip, brotli)</li>
<li>Validation and integrity checking</li>
<li>Diff/patch operations between MBTiles files</li>
<li>Schema management</li>
</ul>
<p><strong>Main Modules</strong>:</p>
<ul>
<li><code>src/lib.rs</code> - Core MBTiles library</li>
<li><code>src/bin/mbtiles.rs</code> - CLI tool</li>
<li><code>sql/</code> - SQL schema and migrations</li>
</ul>
</div>

<div class="mdbook-tab-content hidden" data-tabname="martin-tile-utils">
<p><strong>Purpose</strong>: Low-level tile manipulation and conversion utilities.</p>
<p><strong>Location</strong>: <code>/martin-tile-utils</code></p>
<p><strong>Key Responsibilities</strong>:</p>
<ul>
<li>Tile coordinate system conversions</li>
<li>Tile encoding/decoding</li>
<li>Tile format utilities</li>
<li>Bounding box calculations</li>
</ul>
</div>

</div>

<h2 id="data-flow"><a class="header" href="#data-flow">Data Flow</a></h2>
<div class="mdbook-tabs-container">
<nav class="mdbook-tabs">
<button class="mdbook-tab active" data-tabname="Tile Request Flow">Tile Request Flow</button>
<button class="mdbook-tab" data-tabname="Configuration and Initialization Flow">Configuration and Initialization Flow</button>
<button class="mdbook-tab" data-tabname="Resource Generation Flow">Resource Generation Flow</button>
</nav>
<div class="mdbook-tab-content" data-tabname="Tile Request Flow">
<pre class="mermaid">sequenceDiagram
    participant Client
    participant Server as HTTP Server
    participant Catalog
    participant Cache
    participant Source as Tile Source
    participant DB as Data Store

    Client-&gt;&gt;Server: GET /source_id/z/x/y
    Server-&gt;&gt;Catalog: Resolve source_id
    Catalog--&gt;&gt;Server: Source reference
    Server-&gt;&gt;Cache: Check cache

    alt Tile in cache
        Cache--&gt;&gt;Server: Cached tile
        Server--&gt;&gt;Client: 200 OK (tile data)
    else Tile not in cache
        Server-&gt;&gt;Source: Get tile(z, x, y)
        Source-&gt;&gt;DB: Query data
        DB--&gt;&gt;Source: Raw data
        Source-&gt;&gt;Source: Generate MVT
        Source--&gt;&gt;Server: Tile data
        Server-&gt;&gt;Cache: Store tile
        Server--&gt;&gt;Client: 200 OK (tile data)
    end
</pre>

</div>

<div class="mdbook-tab-content hidden" data-tabname="Configuration and Initialization Flow">
<pre class="mermaid">sequenceDiagram
    participant CLI
    participant Config as Config Parser
    participant Discovery as Source Discovery
    participant Sources as Tile Sources
    participant Server as HTTP Server

    CLI-&gt;&gt;Config: Parse args &amp; config file
    Config-&gt;&gt;Discovery: Initialize sources

    alt PostgreSQL Source
        Discovery-&gt;&gt;Discovery: Connect to database
        Discovery-&gt;&gt;Discovery: Query tables &amp; functions
        Discovery-&gt;&gt;Sources: Register table sources
        Discovery-&gt;&gt;Sources: Register function sources
    end

    alt File Sources
        Discovery-&gt;&gt;Discovery: Scan MBTiles files
        Discovery-&gt;&gt;Discovery: Scan PMTiles files
        Discovery-&gt;&gt;Sources: Register file sources
    end

    Sources--&gt;&gt;Server: Source catalog
    Server-&gt;&gt;Server: Setup routes
    Server-&gt;&gt;Server: Start HTTP listener
</pre>

</div>

<div class="mdbook-tab-content hidden" data-tabname="Resource Generation Flow">
<pre class="mermaid">sequenceDiagram
    participant Client
    participant Server
    participant Sprite as Sprite Generator
    participant Font as Font Generator
    participant FS as File System

    Client-&gt;&gt;Server: GET /sprite/sprite_id
    Server-&gt;&gt;Sprite: Generate sprite
    Sprite-&gt;&gt;FS: Read SVG files
    FS--&gt;&gt;Sprite: SVG data
    Sprite-&gt;&gt;Sprite: Render to PNG
    Sprite-&gt;&gt;Sprite: Generate JSON index
    Sprite--&gt;&gt;Server: Sprite sheet
    Server--&gt;&gt;Client: PNG/JSON response

    Client-&gt;&gt;Server: GET /font/fontstack/range
    Server-&gt;&gt;Font: Generate glyphs
    Font-&gt;&gt;FS: Read font files
    FS--&gt;&gt;Font: Font data
    Font-&gt;&gt;Font: Rasterize glyphs
    Font-&gt;&gt;Font: Encode as PBF
    Font--&gt;&gt;Server: Glyph data
    Server--&gt;&gt;Client: PBF response
</pre>

</div>

</div>

<h2 id="key-design-decisions"><a class="header" href="#key-design-decisions">Key Design Decisions</a></h2>
<blockquote class="blockquote-tag blockquote-tag-note">
<p class="blockquote-tag-title"><svg viewbox="0 0 16 16" width="18" height="18"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p>
<p>üß† This section provides <strong>background and context</strong>, not required knowledge.
You don‚Äôt need to understand or remember all of this to use or contribute to Martin.
Read it when you‚Äôre curious <em>why</em> certain choices were made.</p>
</blockquote>
<h3 id="rust-for-performance-and-safety"><a class="header" href="#rust-for-performance-and-safety">Rust for Performance and Safety</a></h3>
<details>
<summary>
<b>Why Rust</b>: Martin is written in Rust to balance high performance with strong safety guarantees.
<i>(click to expand)</i>
</summary>
<ul>
<li>Near-C performance without manual memory management</li>
<li>Memory safety (no null pointers or buffer overflows)</li>
<li>Safe concurrency without data races</li>
<li>Zero-cost abstractions that compile to efficient code</li>
</ul>
</details>
<h3 id="actix-web-framework"><a class="header" href="#actix-web-framework">Actix-Web Framework</a></h3>
<details>
<summary>
<b>Why Actix-Web</b>: It offers a fast, production-ready async HTTP stack.
<i>(click to expand)</i>
</summary>
<ul>
<li>High-performance async request handling</li>
<li>Mature middleware ecosystem</li>
<li>Built-in compression and caching headers</li>
<li>Easy Prometheus metrics integration</li>
</ul>
</details>
<h3 id="asyncawait-throughout"><a class="header" href="#asyncawait-throughout">Async/Await Throughout</a></h3>
<details>
<summary>
<b>Why async/await</b>: Allows Martin to handle many concurrent requests efficiently.
<i>(click to expand)</i>
</summary>
<ul>
<li>Handles thousands of concurrent connections</li>
<li>Avoids blocking database queries</li>
<li>Enables efficient file and network I/O</li>
<li>Keeps thread usage low under load</li>
</ul>
</details>
<h3 id="crate-separation"><a class="header" href="#crate-separation">Crate Separation</a></h3>
<details>
<summary>
<b>Why multiple crates</b>: The codebase is split into crates with clear responsibilities.
<i>(click to expand)</i>
</summary>
<ul>
<li><strong>martin-core</strong> ‚Äî reusable core logic and tile sources</li>
<li><strong>mbtiles</strong> ‚Äî standalone MBTiles tooling</li>
<li><strong>martin</strong> ‚Äî HTTP server, configuration, and runtime wiring</li>
<li><strong>martin-tile-utils</strong> ‚Äî shared low-level tile utilities</li>
</ul>
<p>This makes it easier to:</p>
<ul>
<li>Embed Martin as a library in other Rust projects</li>
<li>Use MBTiles tools independently</li>
<li>Maintain clear API boundaries and versioning</li>
</ul>
</details>
<h3 id="postgresql-connection-pooling"><a class="header" href="#postgresql-connection-pooling">PostgreSQL Connection Pooling</a></h3>
<details>
<summary>
<b>Why connection pooling</b>: Reuse database connections instead of reconnecting per request.
<i>(click to expand)</i>
</summary>
<ul>
<li>Uses <code>deadpool-postgres</code></li>
<li>Avoids per-request connection overhead</li>
<li>Configurable pool sizing</li>
<li>Automatic connection health checks</li>
</ul>
</details>
<h3 id="in-memory-tile-caching"><a class="header" href="#in-memory-tile-caching">In-Memory Tile Caching</a></h3>
<details>
<summary>
<b>Why caching</b>: Avoid regenerating frequently requested tiles.
<i>(click to expand)</i>
</summary>
<ul>
<li>Fast LRU cache with optional TTLs</li>
<li>Automatic eviction of least-used entries</li>
<li>Configurable memory limits (default: 512 MB)</li>
<li>Thread-safe concurrent access</li>
<li>Significant performance improvements for repeated requests</li>
</ul>
</details>
<h3 id="automatic-source-discovery"><a class="header" href="#automatic-source-discovery">Automatic Source Discovery</a></h3>
<details>
<summary>
<b>Why auto-discovery</b>: Martin tries to work out of the box with minimal configuration.
<i>(click to expand)</i>
</summary>
<p>It can currently automatically detect:</p>
<ul>
<li>PostgreSQL tables with geometry columns</li>
<li>PostgreSQL functions that return MVT</li>
<li>MBTiles and PMTiles files in configured directories</li>
</ul>
<p>This keeps common setups close to zero-config.</p>
</details>
<h3 id="multi-protocol-tile-support"><a class="header" href="#multi-protocol-tile-support">Multi-Protocol Tile Support</a></h3>
<p><strong>Why multiple formats</strong>: Different workloads benefit from different storage models. This lets operators pick the best format for their use case:</p>
<div class="mdbook-tabs-container">
<nav class="mdbook-tabs">
<button class="mdbook-tab active" data-tabname="PostgreSQL">PostgreSQL</button>
<button class="mdbook-tab" data-tabname="MBTiles">MBTiles</button>
<button class="mdbook-tab" data-tabname="PMTiles">PMTiles</button>
<button class="mdbook-tab" data-tabname="COG">COG</button>
</nav>
<div class="mdbook-tab-content" data-tabname="PostgreSQL">
<p>Dynamic tiles generated from live data. Best for frequently changing datasets.</p>
</div>

<div class="mdbook-tab-content hidden" data-tabname="MBTiles">
<p>Pre-generated tile archives. Simple and fast for static datasets.</p>
</div>

<div class="mdbook-tab-content hidden" data-tabname="PMTiles">
<p>Single-file, cloud-native archives optimized for HTTP range requests.</p>
</div>

<div class="mdbook-tab-content hidden" data-tabname="COG">
<p>Direct tile serving from Cloud Optimized GeoTIFFs.</p>
</div>

</div>

<h3 id="on-the-fly-resource-generation"><a class="header" href="#on-the-fly-resource-generation">On-the-Fly Resource Generation</a></h3>
<details>
<summary>
<b>Why generate resources dynamically</b>: Sprites, fonts, and styles are created on demand.
<i>(click to expand)</i>
</summary>
<ul>
<li>No pre-processing step required</li>
<li>Simpler deployments (just provide source files)</li>
<li>URL-based customization</li>
<li>Less storage overhead</li>
</ul>
</details>
<h3 id="modular-configuration"><a class="header" href="#modular-configuration">Modular Configuration</a></h3>
<details>
<summary>
<b>Why layered configuration</b>: Martin supports multiple configuration sources.
<i>(click to expand)</i>
</summary>
<ul>
<li>CLI flags for quick testing and overrides</li>
<li>Environment variables for containerized deployments</li>
<li>Config files for larger or more complex setups</li>
<li>Clear precedence between configuration layers</li>
</ul>
</details>
<h2 id="component-interactions"><a class="header" href="#component-interactions">Component Interactions</a></h2>
<div class="mdbook-tabs-container">
<nav class="mdbook-tabs">
<button class="mdbook-tab active" data-tabname="PostgreSQL Integration">PostgreSQL Integration</button>
<button class="mdbook-tab" data-tabname="File Source Integration">File Source Integration</button>
</nav>
<div class="mdbook-tab-content" data-tabname="PostgreSQL Integration">
<pre class="mermaid">graph TB
    Martin[Martin Server]
    Pool[Connection Pool&lt;br/&gt;deadpool-postgres]

    subgraph PostgreSQL
        Tables[Tables with&lt;br/&gt;Geometry Columns]
        Functions[MVT Functions]
        PostGIS[PostGIS Extension]
    end

    Martin --&gt; Pool
    Pool --&gt; Tables
    Pool --&gt; Functions
    Tables --&gt; PostGIS
    Functions --&gt; PostGIS
</pre>

<p><strong>How it works</strong>:</p>
<ol>
<li>Martin connects to PostgreSQL using connection string</li>
<li>Queries <code>geometry_columns</code> view to discover tables</li>
<li>Queries <code>pg_proc</code> to discover MVT-returning functions</li>
<li>Maintains connection pool for efficient query execution</li>
<li>Generates tile SQL queries with bbox parameters</li>
<li>Returns results as MVT tiles</li>
</ol>
</div>

<div class="mdbook-tab-content hidden" data-tabname="File Source Integration">
<pre class="mermaid">graph TB
    Martin[Martin Server]

    subgraph "Local Files"
        MBT[MBTiles&lt;br/&gt;SQLite]
        PMT[PMTiles&lt;br/&gt;Binary Format]
        COG[GeoTIFF&lt;br/&gt;Cloud Optimized]
    end

    subgraph "Remote Files"
        S3MBT[S3/Azure/GCP&lt;br/&gt;MBTiles]
        S3PMT[S3/Azure/GCP&lt;br/&gt;PMTiles]
        S3COG[S3/Azure/GCP&lt;br/&gt;GeoTIFF]
    end

    Martin --&gt; MBT
    Martin --&gt; PMT
    Martin --&gt; COG
    Martin --&gt; S3MBT
    Martin --&gt; S3PMT
    Martin --&gt; S3COG
</pre>

<p><strong>How it works</strong>:</p>
<ol>
<li>Martin scans configured directories for tile files</li>
<li>Opens MBTiles with SQLite (using <code>sqlx</code>)</li>
<li>Opens PMTiles with custom parser (HTTP range requests for remote)</li>
<li>Opens COG with TIFF parser (HTTP range requests for remote)</li>
<li>Uses <code>object_store</code> crate for S3/Azure/GCP access</li>
<li>Serves tiles directly from file format</li>
</ol>
</div>

</div>

<h2 id="deployment-patterns"><a class="header" href="#deployment-patterns">Deployment Patterns</a></h2>
<p>Martin supports multiple deployment patterns:</p>
<div class="mdbook-tabs-container">
<nav class="mdbook-tabs">
<button class="mdbook-tab active" data-tabname="Standalone Server">Standalone Server</button>
<button class="mdbook-tab" data-tabname="Container Deployment">Container Deployment</button>
<button class="mdbook-tab" data-tabname="Serverless (AWS Lambda)">Serverless (AWS Lambda)</button>
<button class="mdbook-tab" data-tabname="Behind Reverse Proxy">Behind Reverse Proxy</button>
</nav>
<div class="mdbook-tab-content" data-tabname="Standalone Server">
<ul>
<li>Single binary with embedded WebUI</li>
<li>Direct PostgreSQL connection</li>
<li>Local file serving</li>
<li>Suitable for small to medium deployments</li>
</ul>
</div>

<div class="mdbook-tab-content hidden" data-tabname="Container Deployment">
<ul>
<li>Docker image with all dependencies</li>
<li>Configuration via environment variables</li>
<li>Health check endpoints</li>
<li>Suitable for Kubernetes and container orchestrators</li>
</ul>
</div>

<div class="mdbook-tab-content hidden" data-tabname="Serverless (AWS Lambda)">
<ul>
<li>Lambda adapter for Actix-Web</li>
<li>Cold start optimization</li>
<li>Stateless operation</li>
<li>Suitable for sporadic traffic</li>
</ul>
</div>

<div class="mdbook-tab-content hidden" data-tabname="Behind Reverse Proxy">
<ul>
<li>NGINX or Apache fronting Martin</li>
<li>Additional caching layer</li>
<li>SSL termination</li>
<li>Load balancing across multiple Martin instances</li>
</ul>
</div>

</div>

<h2 id="performance-characteristics"><a class="header" href="#performance-characteristics">Performance Characteristics</a></h2>
<div class="mdbook-tabs-container">
<nav class="mdbook-tabs">
<button class="mdbook-tab active" data-tabname="PostgreSQL Queries">PostgreSQL Queries</button>
<button class="mdbook-tab" data-tabname="Tile Encoding">Tile Encoding</button>
<button class="mdbook-tab" data-tabname="Network I/O">Network I/O</button>
<button class="mdbook-tab" data-tabname="Memory">Memory</button>
</nav>
<div class="mdbook-tab-content" data-tabname="PostgreSQL Queries">
<ul>
<li><strong>Bottleneck</strong>: Complex geometry queries on large tables</li>
<li><strong>Optimization</strong>: Spatial indexes (GIST), connection pooling, query tuning</li>
</ul>
</div>

<div class="mdbook-tab-content hidden" data-tabname="Tile Encoding">
<ul>
<li><strong>Bottleneck</strong>: MVT encoding CPU time</li>
<li><strong>Optimization</strong>: Tile caching, pre-generated MBTiles for static data</li>
</ul>
</div>

<div class="mdbook-tab-content hidden" data-tabname="Network I/O">
<ul>
<li><strong>Bottleneck</strong>: High tile request rate</li>
<li><strong>Optimization</strong>: Async I/O, connection keep-alive, compression</li>
</ul>
</div>

<div class="mdbook-tab-content hidden" data-tabname="Memory">
<ul>
<li><strong>Bottleneck</strong>: Large tile cache size</li>
<li><strong>Optimization</strong>: LRU eviction, configurable cache size, streaming responses</li>
</ul>
</div>

</div>

<div class="mdbook-tabs-container">
<nav class="mdbook-tabs">
<button class="mdbook-tab active" data-tabname="Vertical Scaling">Vertical Scaling</button>
<button class="mdbook-tab" data-tabname="Horizontal Scaling">Horizontal Scaling</button>
</nav>
<div class="mdbook-tab-content" data-tabname="Vertical Scaling">
<ul>
<li>Increase CPU for faster tile generation</li>
<li>Increase memory for larger tile cache</li>
<li>Faster disk I/O for file sources</li>
</ul>
</div>

<div class="mdbook-tab-content hidden" data-tabname="Horizontal Scaling">
<ul>
<li>Run multiple Martin instances behind load balancer</li>
<li>Each instance maintains its own cache</li>
<li>Shared PostgreSQL database with connection pooling</li>
<li>CDN for tile distribution</li>
</ul>
</div>

</div>

<div class="mdbook-tabs-container">
<nav class="mdbook-tabs">
<button class="mdbook-tab active" data-tabname="Input Validation">Input Validation</button>
<button class="mdbook-tab" data-tabname="Database Access">Database Access</button>
<button class="mdbook-tab" data-tabname="Network Security">Network Security</button>
</nav>
<div class="mdbook-tab-content" data-tabname="Input Validation">
<ul>
<li>All tile coordinates validated (z/x/y bounds)</li>
<li>SQL injection prevention through parameterized queries</li>
<li>Path traversal prevention for file sources</li>
<li>URL parsing with strict validation</li>
</ul>
</div>

<div class="mdbook-tab-content hidden" data-tabname="Database Access">
<ul>
<li>Read-only database user recommended</li>
<li>Connection string security (avoid logging)</li>
<li>SSL/TLS support for PostgreSQL connections</li>
<li>Certificate validation for secure connections</li>
</ul>
</div>

<div class="mdbook-tab-content hidden" data-tabname="Network Security">
<ul>
<li>CORS configuration for cross-origin requests</li>
<li>Rate limiting (via reverse proxy)</li>
<li>Authentication/authorization (via reverse proxy)</li>
<li>HTTPS termination (via reverse proxy)</li>
</ul>
</div>

</div>

<h2 id="extensibility-points"><a class="header" href="#extensibility-points">Extensibility Points</a></h2>
<h3 id="adding-new-tile-sources"><a class="header" href="#adding-new-tile-sources">Adding New Tile Sources</a></h3>
<p>To add a new tile source type:</p>
<ol>
<li>Implement the <code>Source</code> trait in <code>martin-core</code></li>
<li>Add configuration parsing in <code>martin</code></li>
<li>Register source in the catalog</li>
<li>Add integration tests</li>
</ol>
<p>Example source types that could be added:</p>
<ul>
<li>Direct GeoJSON file serving</li>
<li>Vector tile rendering from raster data</li>
<li>Integration with other spatial databases</li>
</ul>
<h3 id="adding-new-resource-types"><a class="header" href="#adding-new-resource-types">Adding New Resource Types</a></h3>
<p>To add new resource endpoints:</p>
<ol>
<li>Implement resource generator in <code>martin-core</code></li>
<li>Add HTTP handler in <code>martin/src/srv/</code></li>
<li>Add configuration support</li>
<li>Update catalog/discovery</li>
</ol>
<h3 id="custom-authenticationauthorization"><a class="header" href="#custom-authenticationauthorization">Custom Authentication/Authorization</a></h3>
<p>Martin doesn‚Äôt include built-in auth, but supports:</p>
<ul>
<li>Reverse proxy authentication (recommended)</li>
<li>Custom Actix-Web middleware</li>
<li>Token-based access control via proxy</li>
</ul>
<h2 id="monitoring-and-observability"><a class="header" href="#monitoring-and-observability">Monitoring and Observability</a></h2>
<div class="mdbook-tabs-container">
<nav class="mdbook-tabs">
<button class="mdbook-tab active" data-tabname="Metrics">Metrics</button>
<button class="mdbook-tab" data-tabname="Health Checks">Health Checks</button>
<button class="mdbook-tab" data-tabname="Logging">Logging</button>
</nav>
<div class="mdbook-tab-content" data-tabname="Metrics">
<p>Martin exposes Prometheus metrics via <code>/metrics</code>:</p>
<ul>
<li>HTTP request counters and histograms</li>
<li>Tile generation time histograms</li>
<li>Cache hit/miss rates</li>
<li>Database connection pool stats</li>
<li>Error rates by type</li>
</ul>
</div>

<div class="mdbook-tab-content hidden" data-tabname="Health Checks">
<p>We allow health checks via <code>/health</code> and <code>/catalog</code> endpoints:</p>
<ul>
<li><code>/health</code> - Basic health check (HTTP 200)</li>
<li><code>/catalog</code> - Source availability check</li>
</ul>
</div>

<div class="mdbook-tab-content hidden" data-tabname="Logging">
<ul>
<li>logging via <code>env_logger</code></li>
<li>Configurable log levels</li>
<li>Request/response logging</li>
</ul>
</div>

</div>

<h2 id="related-documentation"><a class="header" href="#related-documentation">Related Documentation</a></h2>
<ul>
<li><a href="development.html">Development Guide</a> - Contributing to Martin</li>
<li><a href="config-file.html">Configuration File</a> - Detailed configuration options</li>
<li><a href="using.html">API Documentation</a> - HTTP API reference</li>
<li><a href="sources-tiles.html">Sources Documentation</a> - Tile source configuration</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="mbtiles-validation.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                            </a>

                            <a rel="next prefetch" href="development.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="mbtiles-validation.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                    </a>

                    <a rel="next prefetch" href="development.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                    </a>
            </nav>

        </div>

        <template id=fa-eye><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></template>
        <template id=fa-eye-slash><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c5.2-11.8 8-24.8 8-38.5c0-53-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zm223.1 298L373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5z"/></svg></span></template>
        <template id=fa-copy><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M502.6 70.63l-61.25-61.25C435.4 3.371 427.2 0 418.7 0H255.1c-35.35 0-64 28.66-64 64l.0195 256C192 355.4 220.7 384 256 384h192c35.2 0 64-28.8 64-64V93.25C512 84.77 508.6 76.63 502.6 70.63zM464 320c0 8.836-7.164 16-16 16H255.1c-8.838 0-16-7.164-16-16L239.1 64.13c0-8.836 7.164-16 16-16h128L384 96c0 17.67 14.33 32 32 32h47.1V320zM272 448c0 8.836-7.164 16-16 16H63.1c-8.838 0-16-7.164-16-16L47.98 192.1c0-8.836 7.164-16 16-16H160V128H63.99c-35.35 0-64 28.65-64 64l.0098 256C.002 483.3 28.66 512 64 512h192c35.2 0 64-28.8 64-64v-32h-47.1L272 448z"/></svg></span></template>
        <template id=fa-play><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/></svg></span></template>
        <template id=fa-clock-rotate-left><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"/></svg></span></template>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr-ef4e11c1.min.js"></script>
        <script src="mark-09e88c2c.min.js"></script>
        <script src="searcher-c2a407aa.js"></script>

        <script src="clipboard-1626706a.min.js"></script>
        <script src="highlight-abc7f01d.js"></script>
        <script src="book-a0b12cfe.js"></script>

        <!-- Custom JS scripts -->
        <script src="theme/tabs-4258a7db.js"></script>
        <script src="theme/mermaid-4194ac88.min.js"></script>
        <script src="theme/mermaid-init-e151941c.js"></script>



    </div>
    </body>
</html>
